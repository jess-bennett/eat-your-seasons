{% extends "base.html" %}
{% load static %}

{% block page_header %}
    <div class="container header-container">
        <div class="row">
            <div class="col"></div>
        </div>
    </div>
{% endblock %}

{% block content %}
    <div class="container-fluid">
        <div class="row">
            <div class="col text-center">
            <h1 class="page-heading">My Account</h1>
            </div>
        </div>
        <a href="/accounts/logout">LOG OUT</a>
        <div class="row">
            <div class="col text-center">
                <h3>Pricing Plans</h3>
            </div>
        </div>
        <div class="row">
            <div class="col-4">
                <p class="subtitle">Bronze</p>
                <ul class="feature-list">
                    <li>
                        <span>{% include "icons/tick.svg" %}</span>
                        Access to seasonal items
                    </li>
                    <li>
                        <span>{% include "icons/tick.svg" %}</span>
                        Access to meal suggestions
                    </li>
                    <li>
                        <span>{% include "icons/tick.svg" %}</span>
                        Access to recipes
                    </li>
                    <li>
                        <span>{% include "icons/cross.svg" %}</span>
                        Access to meal plans
                    </li>
                    <li>
                        <span>{% include "icons/cross.svg" %}</span>
                        Access to customisable shopping lists
                    </li>
                </ul>
                <div>
                    <p>FREE</p>
                </div>
            </div>
            {% for product in products %}
            <div class="col-4">
                <p class="subtitle">{{ product.name }}</p>
                <ul class="feature-list">
                    {% for feature, value in product.metadata.items %}
                    <li>
                        <span>{% if value == True %}{% include "icons/tick.svg" %}{% else %}{% include "icons/cross.svg" %}{% endif %}</span>
                        {{ feature }}
                    </li>
                    {% endfor %}
                </ul>
                {% for plan in product.plan_set.all %}
                <div>
                    <p>{{ plan.human_readable_price }}</p>
                </div>
                {% endfor %}
            </div>
            {% endfor %}
        </div>
        <p>Payment</p>
        <form action="/charge" method="post" id="payment-form">
            <div class="form-row">
                <label for="card-element">
                    Credit or debit card
                </label>
                <div id="card-element">
                    <!-- a Stripe Element will be inserted here. -->
                </div>
        
                <!-- Used to display form errors -->
                <div id="card-errors" role="alert"></div>
            </div>
        
            <input type="submit" class="submit" value="Submit Payment">
        </form>
    </div>
{% endblock %}

{% block postloadjs %}
<script src="{% static 'js/stripe_elements.js' %}"></script>
{% endblock %}