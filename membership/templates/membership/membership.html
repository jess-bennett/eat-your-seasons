{% extends "base.html" %}
{% load static %}

{% block page_header %}
<div class="container header-container">
    <div class="row">
        <div class="col"></div>
    </div>
</div>
{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col text-center">
            <h1 class="page-heading">My Account</h1>
        </div>
    </div>
    <div class="row">
        <div class="col text-center">
            <h3>Pricing Plans</h3>
        </div>
    </div>
</div>
<div class="container">
    <div class="row p-3">
        <div class="col-3 offset-3 text-center">
            <div id="month-select" class="interval-box is-selected">
                <h3>Monthly</h3>
            </div>
        </div>
        <div class="col-3 text-center">
            <div id="year-select" class="interval-box">
                <h3>Annual</h3>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-4 text-center">
            <div class="subscription-box is-selected">
                <h2 class="subtitle">Bronze</h2>
                <ul class="feature-list">
                    <li>
                        <span>{% include "icons/tick.svg" %}</span>
                        Access to seasonal items
                    </li>
                    <li>
                        <span>{% include "icons/tick.svg" %}</span>
                        Access to meal suggestions
                    </li>
                    <li>
                        <span>{% include "icons/tick.svg" %}</span>
                        Access to recipes
                    </li>
                    <li>
                        <span>{% include "icons/cross.svg" %}</span>
                        Access to meal plans
                    </li>
                    <li>
                        <span>{% include "icons/cross.svg" %}</span>
                        Access to customisable shopping lists
                    </li>
                </ul>
                <div>
                    <h4>FREE</h4>
                </div>
            </div>
        </div>
        {% for product in products %}
        <div class="col-4" data-product-id="{{ product.id }}">
            <div class="subscription-box">
                <h2 class="subtitle">{{ product.name }}</h2>
                <ul class="feature-list">
                    {% for feature, value in product.metadata.items %}
                    <li>
                        <span>{% if value == True %}{% include "icons/tick.svg" %}{% else %}{% include "icons/cross.svg" %}{% endif %}</span>
                        {{ feature }}
                    </li>
                    {% endfor %}
                </ul>
                {% for plan in product.plan_set.all %}
                    <h4><span class="interval-type interval-month">{% if plan.interval == 'month' %}{{ plan.human_readable_price }}{% endif %}</span><span class="interval-type interval-year">{% if plan.interval == 'year' %}{{ plan.human_readable_price }}{% endif %}</span></h4>
            </div>
            {% endfor %}
            {% endfor %}
        </div>
    </div>
</div>

<div class="container">
    <h3>Payment</h3>
    <form action="/charge" method="post" id="payment-form">
        <div class="form-row">
            <label for="card-element">
                Credit or debit card
            </label>
            <div id="card-element">
                <!-- a Stripe Element will be inserted here. -->
            </div>

            <!-- Used to display form errors -->
            <div id="card-errors" role="alert"></div>
        </div>

        <input type="submit" class="submit" value="Submit Payment">
    </form>
</div>
<div class="container">
    <div class="row text-center">
        <a id="logout" class="anchor hvr-pop" href="/accounts/logout">LOG OUT</a>
    </div>
</div>
{% endblock %}

{% block postloadjs %}
<script src="{% static 'js/stripe.js' %}"></script>
{% endblock %}